<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="UI_ChausseeNeuve.Windows.StructurationExplicationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Structuration automatique de la fondation" 
        Height="500" Width="700"
        WindowStartupLocation="CenterOwner"
        Background="#F3F4F6">
    
    <Window.Resources>
        <SolidColorBrush x:Key="BackgroundBrush" Color="#F3F4F6"/>
        <SolidColorBrush x:Key="ForegroundBrush" Color="#111827"/>
        <SolidColorBrush x:Key="CardBrush" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="HeaderBrush" Color="#374151"/>
        <SolidColorBrush x:Key="MutedBrush" Color="#6B7280"/>
    </Window.Resources>
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <DockPanel Margin="20">
			<TextBlock DockPanel.Dock="Top"
                      FontSize="20" FontWeight="Bold" 
                      Foreground="{StaticResource ForegroundBrush}"
                      Margin="0,0,0,15"><Run Text="Structuration automatique de la fondation"/><Run Language="fr-fr" Text=" - Structure SOUPLE"/></TextBlock>

			<StackPanel DockPanel.Dock="Top" Margin="0,0,0,15">
                <Border Background="{StaticResource HeaderBrush}"
                        Padding="15,10"
                        CornerRadius="6"
                        Margin="0,0,0,15">
                    <TextBlock Text="La fondation sera subdivisee en sous-couches selon les regles suivantes :"
                              TextWrapping="Wrap"
                              Foreground="White"/>
                </Border>

                <TextBlock Text="* Epaisseur maximale de 25 cm par sous-couche"
                          Margin="20,0,0,5" 
                          Foreground="{StaticResource ForegroundBrush}"/>
                          
                <TextBlock Text="* Coefficient de Poisson fixe a 0,35"
                          Margin="20,0,0,5"
                          Foreground="{StaticResource ForegroundBrush}"/>
                          
                <TextBlock Text="* Interfaces collees entre les sous-couches"
                          Margin="20,0,0,5"
                          Foreground="{StaticResource ForegroundBrush}"/>
                          
                <TextBlock Text="* Module calcule progressivement selon la formule :"
                          Margin="20,0,0,5"
                          Foreground="{StaticResource ForegroundBrush}"/>
                          
                <Border Background="{StaticResource CardBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="15,10"
                        Margin="40,5,0,5">
                    <StackPanel>
                        <TextBlock Foreground="{StaticResource ForegroundBrush}">
                            <Run Text="- Pour i=1 : E"/>
                            <Run Text="GNT" BaselineAlignment="Subscript"/>
                            <Run Text="(1) = min(k x E"/>
                            <Run Text="plateforme" BaselineAlignment="Subscript"/>
                            <Run Text=", E"/>
                            <Run Text="GNT" BaselineAlignment="Subscript"/>
                            <Run Text=")"/>
                        </TextBlock>
                        
                        <TextBlock Margin="0,5,0,0" Foreground="{StaticResource ForegroundBrush}">
                            <Run Text="- Pour i>1 : E"/>
                            <Run Text="GNT" BaselineAlignment="Subscript"/>
                            <Run Text="(i) = min(k x E"/>
                            <Run Text="GNT" BaselineAlignment="Subscript"/>
                            <Run Text="(i-1), E"/>
                            <Run Text="GNT" BaselineAlignment="Subscript"/>
                            <Run Text=")"/>
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>

            <Border Background="{StaticResource CardBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="6"
                    DockPanel.Dock="Top" 
                    Margin="0,0,0,15">
                <ScrollViewer MaxHeight="200" 
                             VerticalScrollBarVisibility="Auto"
                             Padding="15" Background="#FFF9FAFB">
                    <ItemsControl x:Name="SousCouchesList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#F9FAFB"
                                        Margin="0,0,0,5"
                                        Padding="10"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="4">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Name}"
                                                 FontWeight="SemiBold"
                                                 Foreground="{StaticResource ForegroundBrush}"/>
                                        <TextBlock Grid.Column="1"
                                                 Text="{Binding Thickness, StringFormat='Epaisseur : {0:F3} m'}"
                                                 Margin="15,0"
                                                 Foreground="{StaticResource MutedBrush}"/>
                                        <TextBlock Grid.Column="2"
                                                 Text="{Binding Module, StringFormat='Module : {0:F0} MPa'}"
                                                 Foreground="{StaticResource MutedBrush}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <Border Background="#F9FAFB"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="15"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Parametres GNT utilises :"
                             FontWeight="SemiBold"
                             Margin="0,0,0,5"
                             Foreground="{StaticResource HeaderBrush}"/>
                    <TextBlock x:Name="ParamsText" 
                             Foreground="{StaticResource MutedBrush}"
                             TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <StackPanel DockPanel.Dock="Bottom"
                       Orientation="Horizontal"
                       HorizontalAlignment="Right">
                <Button x:Name="CancelButton"
                        Content="Annuler"
                        Width="100" Height="30"
                        Margin="0,0,10,0"
                        Background="#F3F4F6"
                        Foreground="{StaticResource ForegroundBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        Click="CancelButton_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                BorderBrush="{TemplateBinding BorderBrush}">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#E5E7EB"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                
                <Button x:Name="ValidateButton"
                        Content="Appliquer"
                        Width="100" Height="30"
                        Background="#374151"
                        Foreground="White"
                        BorderThickness="0"
                        Click="ValidateButton_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                BorderBrush="{TemplateBinding BorderBrush}">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#111827"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </DockPanel>
    </ScrollViewer>
</Window>