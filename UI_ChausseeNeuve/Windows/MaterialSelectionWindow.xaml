<Window x:Class="UI_ChausseeNeuve.Windows.MaterialSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Selection des materiaux"
        Height="750" Width="680"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource PrimaryBg}"
        ResizeMode="CanResize">

    <Border Style="{StaticResource SectionCardStyle}" Margin="15">
        <StackPanel>
            
            <TextBlock x:Name="HeaderTitleText" Text="Selection des materiaux" 
                       Style="{StaticResource SectionTitleStyle}" 
                       HorizontalAlignment="Center" 
                       Margin="0,0,0,15" />

            <Border Background="{StaticResource CardBg}" BorderBrush="{StaticResource AccentBlue}" BorderThickness="1" CornerRadius="6" Padding="15" Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock x:Name="SelectedKindLabel" Text="Valeur selectionnee :" FontWeight="SemiBold" Style="{StaticResource LabelStyle}" Margin="0,0,0,5" />
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="CamValueText" FontSize="16" FontWeight="Bold" Foreground="{StaticResource AccentBlue}" Margin="0,0,10,0" />
                        <TextBlock x:Name="MaterialTypeText" Style="{StaticResource InfoTextStyle}" FontSize="12" VerticalAlignment="Center" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <TextBlock x:Name="InstructionText" Text="Cochez les materiaux auxquels vous souhaitez appliquer cette valeur :" 
                       Style="{StaticResource LabelStyle}" 
                       Margin="0,0,0,10" />

            <Border Background="{StaticResource InputBg}" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,0,15">
                <ScrollViewer MaxHeight="350" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel x:Name="MaterialsStackPanel">
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
                <Button Content="Tout cocher" 
                        Style="{StaticResource SecondaryActionButtonStyle}" 
                        Click="SelectAll_Click" 
                        Margin="0,0,10,0" 
                        MinWidth="80" />
                
                <Button Content="Tout decocher" 
                        Style="{StaticResource SecondaryActionButtonStyle}" 
                        Click="DeselectAll_Click" 
                        MinWidth="80" />
            </StackPanel>

            <Border Background="#fff3cd" BorderBrush="#ffeaa7" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="?" FontSize="16" Margin="0,0,8,0" Foreground="#28a745" />
                    <TextBlock x:Name="HelpText" Text="Selectionnez les materiaux, puis cliquez sur 'Valider et Appliquer' pour confirmer les modifications dans le tableau des valeurs admissibles." 
                               FontSize="11" 
                               TextWrapping="Wrap" 
                               Foreground="#856404" />
                </StackPanel>
            </Border>

            <Border x:Name="SelectionSummary" Background="{StaticResource AccentBlue}" BorderBrush="{StaticResource AccentBlue}" BorderThickness="1" CornerRadius="4" Padding="8" Margin="0,0,0,15" Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="??" FontSize="14" Margin="0,0,8,0" />
                    <TextBlock x:Name="SelectionCountText" Text="0 materiau(x) selectionne(s)" 
                               FontSize="11" 
                               FontWeight="SemiBold"
                               Foreground="White" />
                </StackPanel>
            </Border>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,15">
                <Button Content="Valider et Appliquer" 
                        Style="{StaticResource PrimaryActionButtonStyle}" 
                        Click="Validate_Click" 
                        Margin="0,0,10,0" 
                        MinWidth="120" 
                        MinHeight="35" />
                
                <Button Content="Annuler" 
                        Style="{StaticResource SecondaryActionButtonStyle}" 
                        Click="Cancel_Click" 
                        MinWidth="80" 
                        MinHeight="35" />
            </StackPanel>
        </StackPanel>
    </Border>
</Window>